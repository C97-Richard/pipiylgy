"use strict";(self["webpackChunkecharts_test"]=self["webpackChunkecharts_test"]||[]).push([[360],{1360:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ylgyContainer"},[0===t.step?e("div",{staticClass:"intro"},[e("div",[t._v(" 横向卡片最大平铺排数 "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.x,expression:"option.x"}],attrs:{min:"2",max:"10",type:"range"},domProps:{value:t.option.x},on:{__r:function(e){return t.$set(t.option,"x",e.target.value)}}}),t._v(" "+t._s(t.option.x)+" ")]),e("div",[t._v(" 纵向卡片最大平铺排数 "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.y,expression:"option.y"}],attrs:{min:"2",max:"10",type:"range"},domProps:{value:t.option.y},on:{__r:function(e){return t.$set(t.option,"y",e.target.value)}}}),t._v(" "+t._s(t.option.y)+" ")]),e("div",[t._v(" 卡片最大堆叠层数 "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.z,expression:"option.z"}],attrs:{min:"2",max:"10",type:"range"},domProps:{value:t.option.z},on:{__r:function(e){return t.$set(t.option,"z",e.target.value)}}}),t._v(" "+t._s(t.option.z)+" ")]),e("div",[t._v(" 卡片密度 "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.cardRandom,expression:"option.cardRandom"}],attrs:{min:"0",max:"1",step:"0.1",type:"range"},domProps:{value:t.option.cardRandom},on:{__r:function(e){return t.$set(t.option,"cardRandom",e.target.value)}}}),t._v(" "+t._s(t.option.cardRandom)+" ")]),e("div",[t._v(" 最大卡片种类 "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.maxCardType,expression:"option.maxCardType"}],attrs:{min:"3",max:"14",step:"1",type:"range"},domProps:{value:t.option.maxCardType},on:{__r:function(e){return t.$set(t.option,"maxCardType",e.target.value)}}}),t._v(" "+t._s(t.option.maxCardType)+" ")]),e("br"),e("button",{on:{click:t.startGame}},[t._v("开始游戏")])]):2===t.step?e("div",{staticClass:"intro"},[e("h1",[t._v(t._s(t.result?"You Win！🎉":"You Lose!😢"))]),e("button",{on:{click:t.rePlay}},[t._v("再来一轮")]),e("button",{on:{click:t.setGame}},[t._v("难度调节")])]):e("div",{staticClass:"box"},[e("div",{staticClass:"card-wrap",style:t.cardWrapStyle},[t._l(t.cardItemList,(function(s){return e("div",{key:s.key,staticClass:"card-item",class:{"item-cover":s.cover},style:s.style,on:{click:function(e){return t.clickCard(s)}}},[t._v(" "+t._s(s.content)+" ")])})),t._l(t.penddingList,(function(s){return e("div",{key:s.key,staticClass:"card-item",style:s.style},[t._v(" "+t._s(s.content)+" ")])})),t._l(t.clearList,(function(s){return e("div",{key:s.key,staticClass:"card-item clear-item",style:s.style},[t._v(" "+t._s(s.content)+" ")])})),t._l(t.saveList,(function(s){return e("div",{key:s.key,staticClass:"card-item",style:s.style,on:{click:function(e){return t.clickSaveCard(s)}}},[t._v(" "+t._s(s.content)+" ")])})),e("p",{staticClass:"card-tips"},[t._v(" 剩余空位:"+t._s(7-t.penddingList.length)+"/7；已消除:"+t._s(t.clearList.length)+"/"+t._s(t.cardItemList.length+t.penddingList.length+t.saveList.length+t.clearList.length)+" ")])],2),e("div",{staticClass:"tools"},[t._v(" 道具： "),e("button",{attrs:{disabled:!t.tools.save},on:{click:t.saveCard}},[t._v("取出3个卡片")]),e("button",{attrs:{disabled:!t.tools.rand},on:{click:t.randCard}},[t._v("随机")]),e("button",{on:{click:t.rePlay}},[t._v("再来一轮")])])])])},a=[];function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class r{constructor({x:t,y:e,z:s,key:i}){this.x=t,this.y=e,this.z=s,this.key=i;const a=0*s;this.val=i,this.style={top:e*r.y+a+"px",left:t*r.x+a+"px",width:2*r.x-2+"px",height:2*r.y-8+"px"}}setValue(t){this.val=t,this.content=r.contentType[t],Object.assign(this.style,r.colorType[t])}}n(r,"x",20),n(r,"y",21),n(r,"colorType",{1:{background:"#FFB7DD"},2:{background:"#FFCCCC"},3:{background:"#FFC8B4"},4:{background:"#FFDDAA"},5:{background:"#FFEE99"},6:{background:"#FFFFBB"},7:{background:"#EEFFBB"},8:{background:"#CCFF99"},9:{background:"#99FF99"},10:{background:"#BBFFEE"},11:{background:"#AAFFEE"},12:{background:"#99FFFF"},13:{background:"#CCEEFF"},14:{background:"#CCDDFF"}}),n(r,"contentType",{1:"🥕",2:"✂️",3:"🥦",4:"🥛",5:"🌊",6:"🧤",7:"🧵",8:"🌱",9:"🔨",10:"🌽",11:"🌾",12:"🐑",13:"🪵",14:"🔥"});var o={data(){return{option:{x:6,y:4,z:8,cardRandom:.2,maxCardType:11},step:0,win:!1,cardMap:[],cardItemList:[],penddingList:[],clearList:[],saveList:[],calcValueList:[],xUnit:0,yUnit:0,tools:{save:!0,rand:!0},timer:0}},computed:{cardWrapStyle(){return{width:(this.xUnit+2)*r.x+"px",height:(this.yUnit+1)*r.y+"px"}},leftOffset(){const t=(this.xUnit+2)*r.x;return(t-7*r.x*2)/2}},methods:{randCard(){if(!this.tools.rand)return;this.tools.rand=!1;const t=this.cardItemList.length;this.cardItemList.forEach((e=>{const s=Math.floor(t*Math.random()),i=this.cardItemList[s];let a;a=e.style.left,e.style.left=i.style.left,i.style.left=a,a=e.style.top,e.style.top=i.style.top,i.style.top=a,a=e.x,e.x=i.x,i.x=a,a=e.y,e.y=i.y,i.y=a,a=e.z,e.z=i.z,i.z=a})),this.cardItemList.sort(((t,e)=>t.z-e.z)),this.calcCover()},saveCard(){if(!this.tools.save)return!1;this.tools.save=!1,this.saveList=this.penddingList.slice(0,3),setTimeout((()=>{this.saveList.forEach(((t,e)=>{t.style.top="110%",t.style.left=this.leftOffset+e*r.x*2+"px",this.calcValueList[t.val]--}))}),0),this.penddingList=this.penddingList.slice(3),this.penddingList.forEach(((t,e)=>{t.style.top="160%",t.style.left=this.leftOffset+e*r.x*2+"px"}))},initGame(){this.step=1,this.getMap(this.option),this.penddingList=[],this.clearList=[],this.saveList=[],this.tools.save=!0,this.tools.rand=!0,this.setCardValue({maxCardType:Number(this.option.maxCardType)}),this.calcCover()},initGameMap({x:t,y:e,z:s}){this.xUnit=2*t,this.yUnit=2*e;const i=new Array(s);for(let a=0;a<s;a++){i[a]=new Array(this.yUnit);for(let t=0;t<this.yUnit;t++)i[a][t]=new Array(this.xUnit).fill(0)}return i},getMap({x:t,y:e,z:s,cardRandom:i}={}){const a=this.initGameMap({x:t,y:e,z:s}),n=[];let o=0;for(let l=0;l<s;l++){const t=3,e=Math.floor((s-l-1)/t),c=Math.min(Math.floor(this.xUnit/2)-2,e),d=Math.min(Math.floor(this.yUnit/2)-2,e);for(let s=d;s<this.yUnit-1-d;s++)for(let t=c;t<Math.ceil((this.xUnit-1)/2);t++){let e=!0;if((t>0&&a[l][s][t-1]||s>0&&a[l][s-1][t]||s>0&&t>0&&a[l][s-1][t-1]||s>0&&a[l][s-1][t+1]||l>0&&a[l-1][s][t]||Math.random()>=i)&&(e=!1),e){o++;const e=new r({x:t,y:s,z:l,key:o});a[l][s][t]=e,n.push(e);const i=this.xUnit-2-t;if(i>t){o++;const t=new r({x:i,y:s,z:l,key:o});a[l][s][i]=t,n.push(t)}}}}n.reverse();for(let r=1;r<=o%3;r++){const t=n.pop();a[t.z][t.y][t.x]=0}n.reverse(),this.cardMap=a,this.cardItemList=n},setCardValue({maxCardType:t}={}){const e=new Array(t);this.calcValueList=new Array(t+1).fill(0),this.cardItemList.forEach((s=>{const i=Math.ceil(Math.random()*t);e[i]?(e[i].push(s),3===e[i].length&&(e[i].forEach((t=>{t.setValue(i)})),e[i]=null)):e[i]=[s]}));let s=2;e.forEach((t=>{t&&t.forEach((t=>{s++,t.setValue(Math.floor(s/3))}))}))},calcCover(){const t=new Array(this.yUnit);for(let e=0;e<=this.yUnit;e++)t[e]=new Array(this.xUnit).fill(!1);for(let e=this.cardItemList.length-1;e>=0;e--){const s=this.cardItemList[e],{x:i,y:a,z:n}=s;t[a][i]||t[a][i+1]||t[a+1][i]||t[a+1][i+1]?s.cover=!0:s.cover=!1,t[a][i]=!0,t[a+1][i]=!0,t[a][i+1]=!0,t[a+1][i+1]=!0}},clickSaveCard(t){this.cardItemList.push(t);const e=this.saveList.indexOf(t);this.saveList=this.saveList.slice(0,e).concat(this.saveList.slice(e+1)),this.clickCard(t)},removeThree(){this.penddingList.some((t=>{3===this.calcValueList[t.val]&&(this.penddingList.forEach((e=>{e.val===t.val&&this.clearList.push(e)})),setTimeout((()=>{this.clearList.forEach(((t,e)=>{t.style.left=this.leftOffset-60+"px"}))}),300),this.penddingList=this.penddingList.filter((e=>e.val!==t.val)),this.penddingList.forEach(((t,e)=>{t.style.top="160%",t.style.left=this.leftOffset+e*r.x*2+"px"})),this.calcValueList[t.val]=0,0===this.cardItemList.length&&(this.step=2,this.result=!0))})),this.penddingList.length>=7&&(this.step=2,this.result=!1)},clickCard(t){clearTimeout(this.timer),this.removeThree(),this.penddingList.push(t);const e=this.cardItemList.indexOf(t);this.cardItemList=this.cardItemList.slice(0,e).concat(this.cardItemList.slice(e+1)),this.calcCover(),this.calcValueList[t.val]++,setTimeout((()=>{t.style.top="160%",t.style.left=this.leftOffset+(this.penddingList.length-1)*r.x*2+"px"}),0),this.timer=setTimeout((()=>{this.removeThree()}),500)},startGame(){this.initGame()},setGame(){this.step=0},rePlay(){this.initGame()}}},l=o,c=s(3736),d=(0,c.Z)(l,i,a,!1,null,null,null),h=d.exports}}]);
//# sourceMappingURL=360.6285798f.js.map